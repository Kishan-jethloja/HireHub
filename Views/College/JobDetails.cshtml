@model PlacementManagementSystem.Models.JobPosting
@{
	ViewData["Title"] = "Job Details";
}

<div class="container">
	<div class="row">
		<div class="col-12 mb-3">
			<div class="d-flex justify-content-between align-items-center">
				<div>
					<h2 class="mb-0">@Model.Title</h2>
					<p class="text-muted mb-0">@ViewBag.CompanyName • @Model.Type • @(string.IsNullOrWhiteSpace(Model.Location) ? "Remote/NA" : Model.Location)</p>
				</div>
				<div>
					<a asp-controller="College" asp-action="CompanyJobs" asp-route-id="@Model.CompanyUserId" class="btn btn-outline-primary">
						<i class="fas fa-arrow-left"></i> Back to Jobs
					</a>
				</div>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-lg-8">
			<div class="card">
				<div class="card-header">
					<h5 class="mb-0">Job Description</h5>
				</div>
				<div class="card-body">
					@if (!string.IsNullOrWhiteSpace(Model.Description))
					{
						<div class="job-description">
							@Html.Raw(Model.Description.Replace("\n", "<br/>"))
						</div>
					}
					else
					{
						<p class="text-muted">No description provided.</p>
					}
				</div>
			</div>
		</div>

		<div class="col-lg-4">
			<div class="card">
				<div class="card-header">
					<h5 class="mb-0">Job Details</h5>
				</div>
				<div class="card-body">
					<ul class="list-unstyled">
						<li class="mb-3">
							<strong>Company:</strong><br>
							<span class="text-muted">@ViewBag.CompanyName</span>
						</li>
						<li class="mb-3">
							<strong>Job Type:</strong><br>
							<span class="badge badge-primary">@Model.Type</span>
						</li>
						<li class="mb-3">
							<strong>Location:</strong><br>
							<span class="text-muted">@(string.IsNullOrWhiteSpace(Model.Location) ? "Remote/NA" : Model.Location)</span>
						</li>
						<li class="mb-3">
							<strong>Compensation:</strong><br>
							<span class="text-muted">@(Model.Compensation?.ToString() ?? "Not specified")</span>
						</li>
						<li class="mb-3">
							<strong>Minimum CPI:</strong><br>
							<span class="text-muted">@(Model.MinimumCPI?.ToString() ?? "No requirement")</span>
						</li>
						<li class="mb-3">
							<strong>Apply By:</strong><br>
							<span class="text-muted">@(Model.ApplyByUtc?.ToLocalTime().ToString("MMM dd, yyyy") ?? "No deadline")</span>
						</li>
						<li class="mb-3">
							<strong>Posted:</strong><br>
							<span class="text-muted">@Model.CreatedAtUtc.ToLocalTime().ToString("MMM dd, yyyy HH:mm")</span>
						</li>
						<li class="mb-3">
							<strong>Target College:</strong><br>
							<span class="text-muted">@Model.CollegeName</span>
						</li>
					</ul>
				</div>
			</div>

			<div class="card mt-3">
				<div class="card-header">
					<h5 class="mb-0">Quick Actions</h5>
				</div>
				<div class="card-body">
					<div class="d-grid gap-2">
						<a asp-controller="College" asp-action="CompanyJobs" asp-route-id="@Model.CompanyUserId" class="btn btn-outline-primary">
							<i class="fas fa-list"></i> View All Jobs from @ViewBag.CompanyName
						</a>
						<a asp-controller="College" asp-action="Companies" class="btn btn-outline-secondary">
							<i class="fas fa-building"></i> View All Companies
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<style>
	.job-description {
		line-height: 1.6;
	}
	
	.card {
		box-shadow: 0 2px 4px rgba(0,0,0,0.1);
	}
	
	.card-header {
		background-color: #f8f9fa;
		border-bottom: 1px solid #dee2e6;
	}
</style>
