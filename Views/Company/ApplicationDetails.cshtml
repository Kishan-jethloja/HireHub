@model PlacementManagementSystem.Models.Application
@{
	ViewData["Title"] = "Application Details";
}

<div class="d-flex justify-content-between align-items-center mb-3">
	<h2 class="mb-0">@ViewBag.Job?.Title - Application</h2>
	<a class="btn btn-outline-primary" asp-action="Applications" asp-route-id="@ViewBag.Job?.Id">Back to Applications</a>
</div>

<div class="card">
	<div class="card-body">
		<h4 class="card-title">@Model.ApplicantName</h4>
		<p class="text-muted mb-1">@Model.ApplicantEmail</p>
		<p>
			@{
				var statusClass = Model.Status == PlacementManagementSystem.Models.ApplicationStatus.Hired
					? "badge-success"
					: (Model.Status == PlacementManagementSystem.Models.ApplicationStatus.Rejected ? "badge-danger" : "badge-secondary");
			}
			<span class="badge @statusClass">@Model.Status</span>
		</p>
		<dl class="row">
			<dt class="col-sm-3">College ID</dt>
			<dd class="col-sm-9">@Model.CollegeId</dd>
			<dt class="col-sm-3">Gender</dt>
			<dd class="col-sm-9">@Model.Gender</dd>
			<dt class="col-sm-3">LinkedIn</dt>
			<dd class="col-sm-9"><a href="@Model.LinkedInUrl" target="_blank" rel="noopener">@Model.LinkedInUrl</a></dd>
			<dt class="col-sm-3">GitHub</dt>
			<dd class="col-sm-9"><a href="@Model.GithubUrl" target="_blank" rel="noopener">@Model.GithubUrl</a></dd>
			<dt class="col-sm-3">Why hire</dt>
			<dd class="col-sm-9">@Model.CoverLetter</dd>
		</dl>
	</div>
	<div class="card-footer d-flex justify-content-between align-items-center">
		<small class="text-muted">Applied: @Model.CreatedAtUtc.ToString("yyyy-MM-dd HH:mm")</small>
		@if (!string.IsNullOrWhiteSpace(Model.ResumePath))
		{
			<a class="btn btn-primary btn-sm" href="@Model.ResumePath" target="_blank" rel="noopener">View Resume</a>
		}
		<div class="btn-group ml-2" role="group">
			<form asp-action="Hire" method="post" class="mr-2">
				@Html.AntiForgeryToken()
				<input type="hidden" name="id" value="@Model.Id" />
				<button type="submit" class="btn btn-success btn-sm" onclick="return confirm('Are you sure you want to mark this applicant as Hired?');" @(Model.Status == PlacementManagementSystem.Models.ApplicationStatus.Hired ? "disabled" : null)>Hire</button>
			</form>
			<form asp-action="Reject" method="post">
				@Html.AntiForgeryToken()
				<input type="hidden" name="id" value="@Model.Id" />
				<button type="submit" class="btn btn-danger btn-sm" @(Model.Status == PlacementManagementSystem.Models.ApplicationStatus.Rejected ? "disabled" : null)>Reject</button>
			</form>
		</div>
	</div>
</div>


